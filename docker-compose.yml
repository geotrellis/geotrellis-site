version: '2'

services:
  gtsite-service:
    image: quay.io/geotrellis/gtsite-service
    build:
      context: ./service
      dockerfile: Dockerfile
    ports:
      - "9090:9090"
    volumes:
      - "${HOME}/.ivy2:/root/.ivy2"
      - "${HOME}/.m2:/root/.m2"
      - "${HOME}/.sbt:/root/.sbt"
  gtsite-nginx:
    image: quay.io/geotrellis/gtsite-nginx
    build:
      context: ./nginx
      dockerfile: Dockerfile
    depends_on:
      - gtsite-service
    extra_hosts:
      - "gt-transit:127.0.0.1"
      - "gt-chatta-demo:127.0.0.1"
    ports:
      - "8080:8080"
